(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/site/put-out/put-out"],{"0046":function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement;e._self._c},n=[];o.d(t,"a",function(){return i}),o.d(t,"b",function(){return n})},"01d6":function(e,t,o){"use strict";o.r(t);var i=o("9316"),n=o.n(i);for(var a in i)"default"!==a&&function(e){o.d(t,e,function(){return i[e]})}(a);t["default"]=n.a},"58f8":function(e,t,o){"use strict";(function(e){o("c01f"),o("921b");i(o("66fd"));var t=i(o("ee30"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("6e42")["createPage"])},9316:function(e,t,o){"use strict";(function(e,o){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{page_type:"",page_title:"",outher_id:"",put_title:"",put_content:"",photo:[],themeColor:"#007AFF",mode:"",deepLength:1,pickerValueDefault:[0],pickerValueArray:[],pickerText:"",project_id:"",site_id:""}},onLoad:function(t){i=this,i.page_type=i.$Route.query.page_type,i.site_id=i.$Route.query.site_id,"1"==i.page_type&&(i.page_title="发布",i.doSiteAdd("get")),"2"==i.page_type&&(i.page_title="回复",i.outher_id=i.$Route.query.outher_id,i.$common.getAddress(function(e,t){i.pickerText=res.address}),i.pickerText=""==i.pickerText?"未知位置":res.address),e.setNavigationBarTitle({title:i.page_title})},methods:{chooseLocation:function(){"1"==i.page_type&&i.showSinglePicker(),"2"==i.page_type&&e.chooseLocation({success:function(e){i.pickerText=e.address}})},doSiteComment:function(){if(""!=i.put_content){var t={address:i.pickerText,site_id:i.site_id,b_admin_id:i.outher_id,content:i.put_content,images:i.photo.map(function(e){return e.src}).join(",")};i.$ajax({path:i.$api.site_comment,data:t,success:function(t){var o=t.data,n=o.data,a=(o.code,o.msg);e.showToast({title:a,success:function(){e.$emit("siteComment",n),setTimeout(function(){i.$Router.back(1)},600)}})},fail:function(){}})}else e.showToast({title:"内容不能为空",icon:"none"})},doSiteAdd:function(t){var o={};if("put"==t){if(""==i.put_title)return void e.showToast({title:"标题不能为空",icon:"none"});if(""==i.put_content)return void e.showToast({title:"内容不能为空",icon:"none"});o={project_id:i.project_id,title:i.put_title,content:i.put_content,images:i.photo.map(function(e){return e.src}).join(",")}}i.$ajax({path:i.$api.site_add,data:o,success:function(o){var n=o.data,a=n.data,u=(n.code,n.msg);"get"==t&&(i.pickerValueArray=a.map(function(e){return e.label=e.name,e.value=e.id,e}),i.pickerText=i.pickerValueArray[i.pickerValueDefault[0]].label,i.project_id=i.pickerValueArray[i.pickerValueDefault[0]].id),"put"==t&&e.showToast({title:u,success:function(){e.$emit("siteAddData",a),setTimeout(function(){i.$Router.back(1)},600)}})},fail:function(){}})},onPut:function(e){"1"==i.page_type&&i.doSiteAdd("put"),"2"==i.page_type&&i.doSiteComment()},chooseImage:function(){e.chooseImage({count:6,sizeType:["original","compressed"],success:function(e){var t=e.tempFilePaths;console.log(o(t," at pages\\site\\put-out\\put-out.vue:201")),i.$common.upLoadImage({file:t[0],success:function(e){i.$common.getImageSize({src:e,success:function(e){i.photo.push(e)}})}})}})},onRemoveImage:function(e){i.photo.splice(e,1)},onConfirm:function(e){i.pickerText=e.label,i.project_id=e.value[0]},onCancel:function(e){},showSinglePicker:function(){this.mode="selector",this.deepLength=1,this.pickerValueDefault=[0],this.$refs.mpvuePicker.show()}}};t.default=n}).call(this,o("6e42")["default"],o("0de9")["default"])},ca00:function(e,t,o){},edb4:function(e,t,o){"use strict";var i=o("ca00"),n=o.n(i);n.a},ee30:function(e,t,o){"use strict";o.r(t);var i=o("0046"),n=o("01d6");for(var a in n)"default"!==a&&function(e){o.d(t,e,function(){return n[e]})}(a);o("edb4");var u=o("2877"),c=Object(u["a"])(n["default"],i["a"],i["b"],!1,null,null,null);t["default"]=c.exports}},[["58f8","common/runtime","common/vendor"]]]);